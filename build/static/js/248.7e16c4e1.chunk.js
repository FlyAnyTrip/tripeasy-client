"use strict";(self.webpackChunktravel_package=self.webpackChunktravel_package||[]).push([[248],{6910:(a,e,s)=>{s.d(e,{A:()=>l});var i=s(3216),n=s(5475),d=s(7221),c=s(579);const l=a=>{let{children:e,title:s}=a;const l=(0,i.Zp)(),t=(0,i.zy)(),{success:r,info:m}=(0,d.d)(),o=a=>t.pathname===a||t.pathname.startsWith(a);return(0,c.jsxs)("div",{className:"admin-layout",children:[(0,c.jsx)("header",{className:"admin-header",children:(0,c.jsxs)("div",{className:"admin-header-content",children:[(0,c.jsx)("div",{className:"admin-brand",children:(0,c.jsxs)("h1",{children:[(0,c.jsx)("i",{className:"fas fa-cogs"}),"TripEasy Admin Panel"]})}),(0,c.jsxs)("nav",{className:"admin-nav",children:[(0,c.jsxs)(n.N_,{to:"/admin/dashboard",className:"nav-link "+(o("/admin/dashboard")?"active":""),children:[(0,c.jsx)("i",{className:"fas fa-tachometer-alt"}),"Dashboard"]}),(0,c.jsxs)(n.N_,{to:"/admin/edit/new",className:"nav-link "+(o("/admin/edit/new")?"active":""),children:[(0,c.jsx)("i",{className:"fas fa-plus-circle"}),"Add Package"]}),(0,c.jsxs)(n.N_,{to:"/",className:"nav-link view-site",children:[(0,c.jsx)("i",{className:"fas fa-external-link-alt"}),"View Site"]}),(0,c.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to logout?")&&(localStorage.removeItem("adminToken"),localStorage.removeItem("adminLoginTime"),r("Logged out successfully!"),l("/admin/login"))},className:"logout-btn",children:[(0,c.jsx)("i",{className:"fas fa-sign-out-alt"}),"Logout"]})]})]})}),(0,c.jsx)("main",{className:"admin-main",children:(0,c.jsxs)("div",{className:"admin-content",children:[s&&(0,c.jsxs)("div",{className:"page-header",children:[(0,c.jsx)("h2",{className:"page-title",children:s}),(0,c.jsxs)("div",{className:"breadcrumb",children:[(0,c.jsx)(n.N_,{to:"/admin/dashboard",children:"Dashboard"}),s&&"Dashboard"!==s&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"separator",children:"/"}),(0,c.jsx)("span",{className:"current",children:s})]})]})]}),e]})})]})}},8248:(a,e,s)=>{s.r(e),s.d(e,{RefreshContext:()=>r,default:()=>m});var i=s(5043),n=s(3216),d=s(5475),c=s(2115),l=(s(2342),s(6910)),t=s(579);const r=(0,i.createContext)(null);const m=function(){const[a,e]=(0,i.useState)([]),[s,m]=(0,i.useState)(!0),[o,h]=(0,i.useState)(""),g=(0,n.Zp)(),x=()=>{m(!0),N()};(0,i.useEffect)((()=>{x()}),[]);const N=async()=>{try{const a=localStorage.getItem("adminToken");if(!a)return void g("/admin/login");const s=await fetch("/api/admin/packages",{headers:{Authorization:`Bearer ${a}`}});if(401===s.status)return localStorage.removeItem("adminToken"),void g("/admin/login");const i=await s.json();i.success?e(i.data.packages||[]):h(i.message||"Failed to fetch packages")}catch(o){h("Network error. Please try again."),console.error("Error fetching packages:",o)}finally{m(!1)}};return s?(0,t.jsx)(r.Provider,{value:x,children:(0,t.jsx)(l.A,{children:(0,t.jsxs)("div",{className:"admin-loading-container",children:[(0,t.jsx)("div",{className:"admin-loading-spinner"}),(0,t.jsx)("p",{children:"Loading packages..."})]})})}):(0,t.jsx)(r.Provider,{value:x,children:(0,t.jsxs)(l.A,{children:[(0,t.jsxs)("div",{className:"admin-dashboard-container",children:[(0,t.jsxs)("div",{className:"admin-dashboard-header",children:[(0,t.jsx)("h1",{className:"admin-dashboard-title",children:"Package Management"}),(0,t.jsxs)(d.N_,{to:"/admin/edit/new",className:"admin-add-btn",children:[(0,t.jsx)("i",{className:"fas fa-plus"})," Add New Package"]})]}),o&&(0,t.jsx)("div",{className:"admin-error-message",children:JSON.stringify(o,null,2)}),(0,t.jsx)("div",{className:"admin-packages-grid",children:a.map((a=>{var e;return(0,t.jsxs)("div",{className:"admin-card-box",children:[(0,t.jsxs)("div",{className:"admin-card-header",children:[(0,t.jsxs)("div",{className:"admin-package-info",children:[(0,t.jsx)("h3",{className:"admin-package-name",children:a.name}),(0,t.jsx)("p",{className:"admin-package-location",children:a.location})]}),(0,t.jsxs)("div",{className:"admin-package-actions",children:[(0,t.jsx)(d.N_,{to:`/admin/edit/${a.id}`,className:"admin-edit-btn",title:"Edit Package",children:(0,t.jsx)("i",{className:"fas fa-edit"})}),(0,t.jsx)("button",{onClick:()=>(async a=>{if(window.confirm("Are you sure you want to delete this package?"))try{const e=localStorage.getItem("adminToken"),s=await fetch(`/api/admin/packages/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),i=await s.json();i.success?(x(),c.oR.success("Package deleted successfully",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,className:"admin-toast-success"})):h(i.message||"Failed to delete package")}catch(o){h("Network error. Please try again."),console.error("Error deleting package:",o)}})(a.id),className:"admin-delete-btn",title:"Delete Package",children:(0,t.jsx)("i",{className:"fas fa-trash"})})]})]}),(0,t.jsxs)("div",{className:"admin-card-body",children:[(0,t.jsxs)("div",{className:"admin-package-details",children:[(0,t.jsxs)("div",{className:"admin-detail-item",children:[(0,t.jsx)("span",{className:"admin-detail-label",children:"Price:"}),(0,t.jsxs)("span",{className:"admin-detail-value",children:["\u20b9",null===(e=a.price)||void 0===e?void 0:e.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"admin-detail-item",children:[(0,t.jsx)("span",{className:"admin-detail-label",children:"Duration:"}),(0,t.jsxs)("span",{className:"admin-detail-value",children:[a.duration," days"]})]}),(0,t.jsxs)("div",{className:"admin-detail-item",children:[(0,t.jsx)("span",{className:"admin-detail-label",children:"Category:"}),(0,t.jsx)("span",{className:"admin-category-badge",children:a.category})]}),(0,t.jsxs)("div",{className:"admin-detail-item",children:[(0,t.jsx)("span",{className:"admin-detail-label",children:"Rating:"}),(0,t.jsxs)("span",{className:"admin-rating-value",children:["\u2b50 ",a.rating," (",a.reviews," reviews)"]})]}),(0,t.jsxs)("div",{className:"admin-detail-item",children:[(0,t.jsx)("span",{className:"admin-detail-label",children:"Featured:"}),(0,t.jsx)("span",{className:"admin-status "+(a.featured?"admin-featured":"admin-not-featured"),children:a.featured?"Yes":"No"})]})]}),a.description&&(0,t.jsx)("div",{className:"admin-package-description",children:(0,t.jsxs)("p",{children:[a.description.substring(0,100),"..."]})})]})]},a.id)}))}),0===a.length&&(0,t.jsxs)("div",{className:"admin-empty-state",children:[(0,t.jsx)("div",{className:"admin-empty-icon",children:(0,t.jsx)("i",{className:"fas fa-box-open"})}),(0,t.jsx)("h3",{children:"No packages found"}),(0,t.jsx)("p",{children:"Get started by adding your first package"}),(0,t.jsx)(d.N_,{to:"/admin/edit/new",className:"admin-add-btn",children:"Add First Package"})]})]}),(0,t.jsx)(c.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})}}}]);
//# sourceMappingURL=248.7e16c4e1.chunk.js.map