"use strict";(self.webpackChunktravel_package=self.webpackChunktravel_package||[]).push([[248],{4227:(a,e,s)=>{s.d(e,{bO:()=>n});const i="http://localhost:5000",n={getAllPackages:`${i}/api/packages`,getPackageById:a=>`${i}/api/packages/${a}`,createBooking:`${i}/api/bookings`,createBookingRequest:`${i}/api/booking-requests`,createCustomPackageRequest:`${i}/api/submit-custom-package`,getDestinations:`${i}/api/destinations`,createOrder:`${i}/api/create-order`,verifyPayment:a=>`${i}/api/verify-payment/${a}`,saveBooking:`${i}/api/save-booking`,sendReceipt:`${i}/api/send-receipt`,generateReceipt:`${i}/api/generate-receipt`,healthCheck:`${i}/api/ha`,getAllBookings:`${i}/api/admin/bookings`,getBookingById:a=>`${i}/api/bookings/${a}`,adminPackages:`${i}/api/admin/packages`,adminPackageById:a=>`${i}/api/admin/packages/${a}`}},6910:(a,e,s)=>{s.d(e,{A:()=>t});var i=s(3216),n=s(5475),d=s(7221),c=s(579);const t=a=>{let{children:e,title:s}=a;const t=(0,i.Zp)(),l=(0,i.zy)(),{success:r,info:o}=(0,d.d)(),m=a=>l.pathname===a||l.pathname.startsWith(a);return(0,c.jsxs)("div",{className:"admin-layout",children:[(0,c.jsx)("header",{className:"admin-header",children:(0,c.jsxs)("div",{className:"admin-header-content",children:[(0,c.jsx)("div",{className:"admin-brand",children:(0,c.jsxs)("h1",{children:[(0,c.jsx)("i",{className:"fas fa-cogs"}),"TripEasy Admin Panel"]})}),(0,c.jsxs)("nav",{className:"admin-nav",children:[(0,c.jsxs)(n.N_,{to:"/admin/dashboard",className:"nav-link "+(m("/admin/dashboard")?"active":""),children:[(0,c.jsx)("i",{className:"fas fa-tachometer-alt"}),"Dashboard"]}),(0,c.jsxs)(n.N_,{to:"/admin/edit/new",className:"nav-link "+(m("/admin/edit/new")?"active":""),children:[(0,c.jsx)("i",{className:"fas fa-plus-circle"}),"Add Package"]}),(0,c.jsxs)(n.N_,{to:"/",className:"nav-link view-site",children:[(0,c.jsx)("i",{className:"fas fa-external-link-alt"}),"View Site"]}),(0,c.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to logout?")&&(localStorage.removeItem("adminToken"),localStorage.removeItem("adminLoginTime"),r("Logged out successfully!"),t("/admin/login"))},className:"logout-btn",children:[(0,c.jsx)("i",{className:"fas fa-sign-out-alt"}),"Logout"]})]})]})}),(0,c.jsx)("main",{className:"admin-main",children:(0,c.jsxs)("div",{className:"admin-content",children:[s&&(0,c.jsxs)("div",{className:"page-header",children:[(0,c.jsx)("h2",{className:"page-title",children:s}),(0,c.jsxs)("div",{className:"breadcrumb",children:[(0,c.jsx)(n.N_,{to:"/admin/dashboard",children:"Dashboard"}),s&&"Dashboard"!==s&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"separator",children:"/"}),(0,c.jsx)("span",{className:"current",children:s})]})]})]}),e]})})]})}},8248:(a,e,s)=>{s.r(e),s.d(e,{RefreshContext:()=>o,default:()=>m});var i=s(5043),n=s(3216),d=s(5475),c=s(2115),t=(s(2342),s(6910)),l=s(4227),r=s(579);const o=(0,i.createContext)(null);const m=function(){const[a,e]=(0,i.useState)([]),[s,m]=(0,i.useState)(!0),[h,g]=(0,i.useState)(""),p=(0,n.Zp)(),x=()=>{m(!0),N()};(0,i.useEffect)((()=>{x()}),[]);const N=async()=>{try{const a=localStorage.getItem("adminToken");if(!a)return void p("/admin/login");const s=await fetch(l.bO.adminPackages,{headers:{Authorization:`Bearer ${a}`}});if(401===s.status)return localStorage.removeItem("adminToken"),void p("/admin/login");const i=await s.json();i.success?e(i.data.packages||[]):g(i.message||"Failed to fetch packages")}catch(h){g("Network error. Please try again."),console.error("[v0] Error fetching packages:",h)}finally{m(!1)}};return s?(0,r.jsx)(o.Provider,{value:x,children:(0,r.jsx)(t.A,{children:(0,r.jsxs)("div",{className:"admin-loading-container",children:[(0,r.jsx)("div",{className:"admin-loading-spinner"}),(0,r.jsx)("p",{children:"Loading packages..."})]})})}):(0,r.jsx)(o.Provider,{value:x,children:(0,r.jsxs)(t.A,{children:[(0,r.jsxs)("div",{className:"admin-dashboard-container",children:[(0,r.jsxs)("div",{className:"admin-dashboard-header",children:[(0,r.jsx)("h1",{className:"admin-dashboard-title",children:"Package Management"}),(0,r.jsxs)(d.N_,{to:"/admin/edit/new",className:"admin-add-btn",children:[(0,r.jsx)("i",{className:"fas fa-plus"})," Add New Package"]})]}),h&&(0,r.jsx)("div",{className:"admin-error-message",children:JSON.stringify(h,null,2)}),(0,r.jsx)("div",{className:"admin-packages-grid",children:a.map((a=>{var e;return(0,r.jsxs)("div",{className:"admin-card-box",children:[(0,r.jsxs)("div",{className:"admin-card-header",children:[(0,r.jsxs)("div",{className:"admin-package-info",children:[(0,r.jsx)("h3",{className:"admin-package-name",children:a.name}),(0,r.jsx)("p",{className:"admin-package-location",children:a.location})]}),(0,r.jsxs)("div",{className:"admin-package-actions",children:[(0,r.jsx)(d.N_,{to:`/admin/edit/${a.id}`,className:"admin-edit-btn",title:"Edit Package",children:(0,r.jsx)("i",{className:"fas fa-edit"})}),(0,r.jsx)("button",{onClick:()=>(async a=>{if(window.confirm("Are you sure you want to delete this package?"))try{const e=localStorage.getItem("adminToken"),s=await fetch(l.bO.adminPackageById(a),{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),i=await s.json();i.success?(x(),c.oR.success("Package deleted successfully",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,className:"admin-toast-success"})):g(i.message||"Failed to delete package")}catch(h){g("Network error. Please try again."),console.error("[v0] Error deleting package:",h)}})(a.id),className:"admin-delete-btn",title:"Delete Package",children:(0,r.jsx)("i",{className:"fas fa-trash"})})]})]}),(0,r.jsxs)("div",{className:"admin-card-body",children:[(0,r.jsxs)("div",{className:"admin-package-details",children:[(0,r.jsxs)("div",{className:"admin-detail-item",children:[(0,r.jsx)("span",{className:"admin-detail-label",children:"Price:"}),(0,r.jsxs)("span",{className:"admin-detail-value",children:["\u20b9",null===(e=a.price)||void 0===e?void 0:e.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"admin-detail-item",children:[(0,r.jsx)("span",{className:"admin-detail-label",children:"Duration:"}),(0,r.jsxs)("span",{className:"admin-detail-value",children:[a.duration," days"]})]}),(0,r.jsxs)("div",{className:"admin-detail-item",children:[(0,r.jsx)("span",{className:"admin-detail-label",children:"Category:"}),(0,r.jsx)("span",{className:"admin-category-badge",children:a.category})]}),(0,r.jsxs)("div",{className:"admin-detail-item",children:[(0,r.jsx)("span",{className:"admin-detail-label",children:"Rating:"}),(0,r.jsxs)("span",{className:"admin-rating-value",children:["\u2b50 ",a.rating," (",a.reviews," reviews)"]})]}),(0,r.jsxs)("div",{className:"admin-detail-item",children:[(0,r.jsx)("span",{className:"admin-detail-label",children:"Featured:"}),(0,r.jsx)("span",{className:"admin-status "+(a.featured?"admin-featured":"admin-not-featured"),children:a.featured?"Yes":"No"})]})]}),a.description&&(0,r.jsx)("div",{className:"admin-package-description",children:(0,r.jsxs)("p",{children:[a.description.substring(0,100),"..."]})})]})]},a.id)}))}),0===a.length&&(0,r.jsxs)("div",{className:"admin-empty-state",children:[(0,r.jsx)("div",{className:"admin-empty-icon",children:(0,r.jsx)("i",{className:"fas fa-box-open"})}),(0,r.jsx)("h3",{children:"No packages found"}),(0,r.jsx)("p",{children:"Get started by adding your first package"}),(0,r.jsx)(d.N_,{to:"/admin/edit/new",className:"admin-add-btn",children:"Add First Package"})]})]}),(0,r.jsx)(c.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})}}}]);
//# sourceMappingURL=248.23bea0b3.chunk.js.map